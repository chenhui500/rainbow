webpackJsonp([8],{"2uFj":function(t,e,o){"use strict";e.a={development:{host:"http://localhost:8680/rainbowdb"},production:{host:"http://39.105.196.199:8680/rainbowdb"}}},"3cXf":function(t,e,o){t.exports={default:o("RJ+u"),__esModule:!0}},"4OgE":function(t,e,o){"use strict";var n=o("gyMJ"),i=o("6ROu");o.n(i),e.a={data:function(){return{dialogVisible:!1,tableData:[],cur_page:1,editVisible:!1,addVisible:!0,form:{_id:"",promotion_days:"",promotion_content:"",promotion_type:1,promotion_state:"0"},total:10,currentPage:1,pageSize:10,idx:-1}},created:function(){this.getData()},methods:{handleCurrentChange:function(t){this.cur_page=t,this.getData()},getData:function(){var t=this;n.l(this.cur_page,this.pageSize,{}).then(function(e){t.tableData=e.data.data,t.total=e.data.total})},addReward:function(){this.form.reward_title="",this.form.reward_content="",this.editVisible=!0,this.addVisible=!0},closeDistribution:function(){this.getData(),this.editVisible=!1,this.addVisible=!1},saveEdit:function(){var t=this,e={rewardId:this.form._id,reward_title:this.form.reward_title,reward_content:this.form.reward_content};n.v(e).then(function(e){e.data.success,e.data.success?(t.editVisible=!1,t.$message.success("修改成功")):t.$message.error("派单不成功")})},saveAdd:function(){var t=this,e={promotion_days:this.form.promotion_days,promotion_type:this.form.promotion_type,promotion_state:this.form.promotion_state,promotion_content:this.form.promotion_content};n.b(e).then(function(e){e.data.success,e.data.success?(t.editVisible=!1,t.$message.success("添加成功")):t.$message.error("添加不成功")})},orderEdit:function(t){this.idx=t;var e=this.tableData[t];this.form={_id:e._id,promotion_days:e.promotion_days,promotion_type:e.promotion_type,promotion_state:0==e.promotion_state?"0":"1",promotion_content:e.promotion_content},this.editVisible=!0,this.addVisible=!1},showRewardDel:function(t){this.idx=t;var e=this.tableData[t];this.form.promotion_state=e.promotion_state,this.dialogVisible=!0},rewardDel:function(){var t=this,e=this.idx,o=this.tableData[e],i={promotionid:o._id,promotion_state:0==o.promotion_state?"1":"0"};n.t(i).then(function(e){e.data.success,e.data.success?(t.dialogVisible=!1,t.$message.success("设置成功")):t.$message.error("设置不成功")})},handleSelectionChange:function(t){this.multipleSelection=t}}}},Et0Z:function(t,e,o){"use strict";var n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"table"},[o("div",{staticClass:"container"},[o("div",{staticClass:"handle-box"},[o("el-button",{attrs:{type:"primary"},on:{click:t.addReward}},[t._v("新 增")])],1),t._v(" "),o("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","default-sort":{prop:"date",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{prop:"promotion_days",label:"活动天数"}}),t._v(" "),o("el-table-column",{attrs:{prop:"promotion_content",label:"活动简介"}}),t._v(" "),o("el-table-column",{attrs:{prop:"promotion_type",label:"活动类型"}}),t._v(" "),o("el-table-column",{attrs:{prop:"promotion_state",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.promotion_state?o("div",[t._v("\n                        启用\n                    ")]):o("div",[t._v("\n                        禁用\n                    ")])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.promotion_state?o("div",[o("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(o){t.orderEdit(e.$index)}}},[t._v("\n                            编辑\n                        ")]),t._v(" "),o("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(o){t.showRewardDel(e.$index)}}},[t._v("\n                            禁用\n                        ")])],1):o("div",[o("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(o){t.orderEdit(e.$index)}}},[t._v("\n                            编辑\n                        ")]),t._v(" "),o("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(o){t.showRewardDel(e.$index)}}},[t._v("\n                            启用\n                        ")])],1)]}}])})],1),t._v(" "),o("div",{staticClass:"pagination"},[o("el-pagination",{attrs:{background:"",layout:"total,  prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e},close:t.closeDistribution}},[o("div",{attrs:{id:"printTest"}},[o("el-form",{ref:"ruleForm",attrs:{model:t.form,"label-width":"180px"}},[o("el-row",[o("el-col",{attrs:{span:24}},[o("div",{staticStyle:{"padding-top":"15px","padding-bottom":"15px","text-align":"center","font-size":"20px"}},[t._v("\n                            活动详情\n                        ")])])],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:"活动天数:",prop:"promotion_days"}},[o("el-input",{attrs:{type:"number",placeholder:"请输入内容"},model:{value:t.form.promotion_days,callback:function(e){t.$set(t.form,"promotion_days",e)},expression:"form.promotion_days"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:"活动类型:",prop:"promotion_type"}},[o("el-input",{attrs:{type:"number",placeholder:"请输入内容"},model:{value:t.form.promotion_type,callback:function(e){t.$set(t.form,"promotion_type",e)},expression:"form.promotion_type"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:"状态:",prop:"promotion_state"}},[[o("el-radio",{attrs:{label:"0"},model:{value:t.form.promotion_state,callback:function(e){t.$set(t.form,"promotion_state",e)},expression:"form.promotion_state"}},[t._v("启用")]),t._v(" "),o("el-radio",{attrs:{label:"1"},model:{value:t.form.promotion_state,callback:function(e){t.$set(t.form,"promotion_state",e)},expression:"form.promotion_state"}},[t._v("禁用")])]],2)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:"活动内容简介:",prop:"promotion_content"}},[o("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入内容"},model:{value:t.form.promotion_content,callback:function(e){t.$set(t.form,"promotion_content",e)},expression:"form.promotion_content"}})],1)],1)],1)],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==t.addVisible?o("div",[o("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.saveAdd}},[t._v("确 定")])],1):o("div",[o("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)])]),t._v(" "),o("el-dialog",{attrs:{title:"提示",width:"30%",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:t.closeDistribution}},[0==t.form.promotion_state?o("span",[t._v("\n            确定要禁用该活动？")]):o("span",[t._v("确定要启用该活动？")]),t._v("\n        "+t._s(t.form.promotion_state)+"\n        "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.rewardDel}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};e.a=n},G53t:function(t,e,o){(t.exports=o("UTlt")(!0)).push([t.i,".handle-box[data-v-4f98e7ae]{margin-bottom:20px}.handle-select[data-v-4f98e7ae]{width:120px}.handle-input[data-v-4f98e7ae]{width:300px;display:inline-block}.table[data-v-4f98e7ae]{width:100%;font-size:14px}.big-modal img[data-v-4f98e7ae]{display:inline-block;width:80%;height:80%}hr[data-v-4f98e7ae]{margin-top:10px;margin-bottom:10px}","",{version:3,sources:["E:/work_space/rainbowproperty/src/components/page/PromotionHanding.vue"],names:[],mappings:"AACA,6BACI,kBAAoB,CACvB,AACD,gCACI,WAAa,CAChB,AACD,+BACI,YAAa,AACb,oBAAsB,CACzB,AACD,wBACI,WAAY,AACZ,cAAgB,CACnB,AACD,gCACI,qBAAsB,AACtB,UAAW,AACX,UAAY,CACf,AACD,oBACI,gBAAiB,AACjB,kBAAoB,CACvB",file:"PromotionHanding.vue",sourcesContent:["\n.handle-box[data-v-4f98e7ae] {\n    margin-bottom: 20px;\n}\n.handle-select[data-v-4f98e7ae] {\n    width: 120px;\n}\n.handle-input[data-v-4f98e7ae] {\n    width: 300px;\n    display: inline-block;\n}\n.table[data-v-4f98e7ae] {\n    width: 100%;\n    font-size: 14px;\n}\n.big-modal img[data-v-4f98e7ae] {\n    display: inline-block;\n    width: 80%;\n    height: 80%;\n}\nhr[data-v-4f98e7ae] {\n    margin-top: 10px;\n    margin-bottom: 10px;\n}\n"],sourceRoot:""}])},PKMn:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("4OgE"),i=o("Et0Z"),a=function(t){o("hRAr")},r=o("C7Lr")(n.a,i.a,!1,a,"data-v-4f98e7ae",null);e.default=r.exports},"RJ+u":function(t,e,o){var n=o("AKd3"),i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},gyMJ:function(t,e,o){"use strict";o.d(e,"q",function(){return d}),o.d(e,"x",function(){return u}),o.d(e,"k",function(){return c}),o.d(e,"s",function(){return p}),o.d(e,"n",function(){return f}),o.d(e,"v",function(){return m}),o.d(e,"d",function(){return _}),o.d(e,"h",function(){return b}),o.d(e,"l",function(){return v}),o.d(e,"t",function(){return h}),o.d(e,"b",function(){return g}),o.d(e,"p",function(){return A}),o.d(e,"j",function(){return y}),o.d(e,"a",function(){return w}),o.d(e,"r",function(){return C}),o.d(e,"f",function(){return x}),o.d(e,"o",function(){return k}),o.d(e,"w",function(){return D}),o.d(e,"e",function(){return B}),o.d(e,"i",function(){return S}),o.d(e,"m",function(){return V}),o.d(e,"u",function(){return R}),o.d(e,"c",function(){return $}),o.d(e,"g",function(){return z});var n=o("3cXf"),i=o.n(n),a=o("2uFj"),r=o("6sKG"),s=o.n(r),l=a.a.production.host,d=function(t){return s.a.post(l+"/admin/login/",t).then(function(t){return t.data})},u=function(t){return s.a.post(l+"/user/updateUser",t)},c=function(t,e,o){return s.a.get(l+"/api/order/?pageNum="+t+"&pageSize="+e+"&filter="+i()(o))},p=function(t){return s.a.post(l+"/order/updateOrder",t)},f=function(t,e,o){return s.a.get(l+"/api/reward/?pageNum="+t+"&pageSize="+e+"&filter="+i()(o))},m=function(t){return s.a.post(l+"/reward/updateReward",t)},_=function(t){return s.a.post(l+"/reward/addReward",t)},b=function(t){return s.a.post(l+"/reward/delReward",t)},v=function(t,e,o){return s.a.get(l+"/api/promotion/?pageNum="+t+"&pageSize="+e+"&filter="+i()(o))},h=function(t){return s.a.post(l+"/promotion/updatePromotion",t)},g=function(t){return s.a.post(l+"/promotion/addPromotion",t)},A=function(t,e,o){return s.a.get(l+"/api/user/?pageNum="+t+"&pageSize="+e+"&filter="+i()(o))},y=function(t,e,o){return s.a.get(l+"/api/admin/?pageNum="+t+"&pageSize="+e+"&filter="+i()(o))},w=function(t){return s.a.post(l+"/admin/addAdminUser",t)},C=function(t){return s.a.post(l+"/admin/updateAdminUser",t)},x=function(t){return s.a.post(l+"/admin/delAdminUser",t)},k=function(t,e,o){return s.a.get(l+"/api/synopsis/?pageNum="+t+"&pageSize="+e+"&filter="+i()(o))},D=function(t){return s.a.post(l+"/synopsis/updateSynopsis",t)},B=function(t){return s.a.post(l+"/synopsis/addSynopsis",t)},S=function(t){return s.a.post(l+"/synopsis/delSynopsis",t)},V=function(t,e,o){return s.a.get(l+"/api/rank/?pageNum="+t+"&pageSize="+e+"&filter="+i()(o))},R=function(t){return s.a.post(l+"/rank/updateRank",t)},$=function(t){return s.a.post(l+"/rank/addRank",t)},z=function(t){return s.a.post(l+"/rank/delRank",t)}},hRAr:function(t,e,o){var n=o("G53t");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),o("FIqI")("18c1738a",n,!0,{})}});